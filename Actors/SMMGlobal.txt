ACTOR MultiplyToken : Inventory { Inventory.MaxAmount 12 }

ACTOR PinataDrop : RandomSpawner
{
	dropitem "Ammo1Small" 255 256
	dropitem "Ammo2Small" 255 256
	dropitem "AmmoBackpack" 255 64
	dropitem "Ammo3Small" 255 128
	dropitem "Ammo4Small" 255 128
	dropitem "HealPack1" 255 128
	dropitem "HealPack2" 255 64
	dropitem "SamsaraSlotOneDrop" 255 32
	dropitem "SamsaraSlotTwoDrop" 255 32
	dropitem "Ammo1Big" 255 16
	dropitem "Ammo2Big" 255 16
	dropitem "Visor" 255 16
	dropitem "ArmorPack1" 255 16
	dropitem "SamsaraSlotThreeDrop" 255 16
	dropitem "Ammo3Big" 255 8
	dropitem "Ammo4Big" 255 8
	dropitem "ArmorPack2" 255 8
	dropitem "SuperHealth" 255 8
	dropitem "PartialInvisibility" 255 8
	dropitem "SamsaraSlotFourDrop" 255 8
	dropitem "MegaPack" 255 8
	dropitem "SamsaraSlotFiveDrop" 255 4
	dropitem "InvulnPowerup" 255 4
	dropitem "ProsperityRune2" 255 4
	dropitem "HasteRune2" 255 4
	dropitem "BioSuit" 255 2
	dropitem "SamsaraSlotSixDrop" 255 2
	dropitem "StrengthRune2" 255 2
	dropitem "RageRune2" 255 2
	dropitem "ResistanceRune2" 255 2
	dropitem "ReflectionRune2" 255 2
	dropitem "SamsaraUniquePickup" 255 2
	dropitem "SamsaraSlotSevenDrop" 255 1
	dropitem "SpreadRune2" 255 1
	dropitem "DrainRune2" 255 1
	dropitem "RegenerationRune2" 255 1
	dropitem "HighJumpRune2" 255 1
	dropitem "HeXenBeaconItem" 255 1
}

ACTOR StrengthRune2 : StrengthRune { -NOGRAVITY }
ACTOR RageRune2 : RageRune { -NOGRAVITY }
ACTOR DrainRune2 : DrainRune { -NOGRAVITY }
ACTOR SpreadRune2 : SpreadRune { -NOGRAVITY }
ACTOR ResistanceRune2 : ResistanceRune { -NOGRAVITY }
ACTOR RegenerationRune2 : RegenerationRune { -NOGRAVITY }
ACTOR ProsperityRune2 : ProsperityRune { -NOGRAVITY }
ACTOR ReflectionRune2 : ReflectionRune { -NOGRAVITY }
ACTOR HighJumpRune2 : HighJumpRune { -NOGRAVITY }
ACTOR HasteRune2 : HasteRune { -NOGRAVITY }

ACTOR DefaultPinataPop
{
	+DROPPED
	DropItem "PinataDrop"
	States
	{
		Spawn:
			TNT1 A 0
			Goto Death
		Death:
			TNT1 A 0
			TNT1 A 1 A_JumpIf(ACS_ExecuteWithResult(680,5) == 0, "Death2")
			TNT1 AAAAA 0 A_SpawnItemEx("DefaultPinataPop2",0,0,0,random(-10,10),random(-10,10),random(-10,10),0,32)
			Stop
		Death2:
			TNT1 A 5
			Stop
	}
}

ACTOR DefaultPinataPop2
{
	+DROPPED
	DropItem "PinataDrop"
	States
	{
		Spawn:
			TNT1 A 0
			Goto Death
		Death:
			TNT1 A 5
			TNT1 A 0 A_NoBlocking
			Stop
	}
}

//Modified Duke gibs

ACTOR NewDukeGibs1 : DukeGibs1 replaces DukeGibs1
{
	States
	{
		Spawn:
			DKG1 ABCD 5
			Loop
		Death:
			TNT1 A 0 A_Gravity
			TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(SAMSARA_DECORATE,31) == 1, "Death2")
			DKG6 ABCDEF 5
			Stop
		Death2:
			DKG1 E 2100
			Loop
	}
}

ACTOR NewDukeGibs2 : NewDukeGibs1 replaces DukeGibs2
{
	Health 2
	States
	{
		Spawn:
			DKG2 ABCD 5
			Loop
		Death2:
			DKG2 E 2100
			Loop
	}
}

ACTOR NewDukeGibs3 : NewDukeGibs1 replaces DukeGibs3
{
	Health 4
	States
	{
		Spawn:
			DKG3 ABCD 5
			Loop
		Death2:
			DKG3 E 2100
			Loop
	}
}

ACTOR NewDukeGibs4 : NewDukeGibs1 replaces DukeGibs4
{
	States
	{
		Spawn:
			DKG4 ABCD 5
			Loop
		Death2:
			DKG4 E 2100
			Loop
	}
}

ACTOR NewDukeGibs5 : NewDukeGibs1 replaces DukeGibs5
{
	States
	{
		Spawn:
			DKG5 ABCD 5
			Loop
		Death2:
			DKG5 E 2100
			Loop
	}
}

ACTOR NewDukeGibs6 : NewDukeGibs1 replaces DukeGibs6
{
	States
	{
		Spawn:
			DKG6 AB 5
			Loop
		Death2:
			DKG6 CDEFGH 5
			DKG6 H 2100
			Goto Death2+6
	}
}

//Duke Shrapnel

ACTOR DukeShrapnel1 : NewDukeGibs1
{
	Health 1
	States
	{
		Spawn:
			DKS2 ABCD 5
			Loop
		Death:
			TNT1 A 0 A_Gravity
			TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(SAMSARA_DECORATE,31) == 1, "Death2")
			TNT1 A 1
			Stop
		Death2:
			DKS2 B 2100
			Loop
	}
}

ACTOR DukeShrapnel2 : NewDukeGibs1
{
	Health 1
	States
	{
		Spawn:
			DKS3 ABCD 5
			Loop
		Death:
			TNT1 A 0 A_Gravity
			TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(SAMSARA_DECORATE,31) == 1, "Death2")
			TNT1 A 0
			Stop
		Death2:
			DKS3 A 2100
			Loop
	}
}

ACTOR DukeShrapnel3 : NewDukeGibs1
{
	Health 1
	States
	{
		Spawn:
			DKS4 ABCD 5
			Loop
		Death:
			TNT1 A 0 A_Gravity
			TNT1 A 0 A_JumpIf(ACS_ExecuteWithResult(SAMSARA_DECORATE,31) == 1, "Death2")
			TNT1 A 1
			Stop
		Death2:
			DKS4 D 2100
			Loop
	}
}
