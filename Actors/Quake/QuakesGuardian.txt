ACTOR QuakesGuardian
{
	Health 2000
	Radius 24
	Height 64
	Speed 10
	Mass 0x7FFFFFFF
	PainChance 10
	Scale 0.5
	MeleeRange 96
	MONSTER
	+BOSS
	+FLOORCLIP
    +NOTDMATCH
    +THRUGHOST
	+MISSILEMORE
	+MISSILEEVENMORE
	PainSound "qguardian/pain"
	DeathSound "qguardian/death"
	Dropitem "DefaultPinataPop"
	Obituary "%o was crushed by a Guardian"
    DamageFactor "Mace", 1.1
    DamageFactor "DragonClaw", 1.5
	DamageFactor "MarathonFusion", 2.0
	BloodType "QuakeBlood"
	States
	{
		Spawn:
			TNT1 A 0
			TNT1 A 1 A_JumpIfInventory("AlreadySpawned",1,"Walk")
			TNT1 A 1 ACS_NamedExecuteAlways("SMMSpawningScript",0,1,0)
			TNT1 A 0 A_GiveInventory("AlreadySpawned",1)
		Spawn2:
			TNT1 A 3 A_Look
			Loop
		See:
			TNT1 A 0 A_JumpIfInventory("AttackFrequency",1,"See2")
			TNT1 A 0 A_PlaySound("qguardian/sight",CHAN_VOICE,1.0,0,ATTN_NONE)
			QGU1 ABCDEFGHIJKLMNOPQRSTUVWXYZ 3
			QGU2 ABCDE 3
			TNT1 A 0 A_GiveInventory("AttackFrequency",1)
			Goto See2
		Walk:
			QGU2 FGH 3 A_Wander
			TNT1 A 0 A_Look
			QGU2 IJK 3 A_Wander
			TNT1 A 0 A_Look
			QGU2 LMN 3 A_Wander
			TNT1 A 0 A_Look
			QGU2 OPQR 3 A_Wander
			TNT1 A 0 A_Look
			Loop
		See2:
			QGU2 STUVWXYZ 3 A_Chase
			QGU3 ABC 3 A_Chase
			Loop
		Melee:
			TNT1 A 0 A_Jump(128,"Melee2","Melee3")
			QGU3 MNOPQR 3 A_FaceTarget
			TNT1 A 0 A_CustomMissile("QGuardianLaser",32,0,-7)
			TNT1 A 0 A_CustomMissile("QGuardianLaser",32,0,0)
			TNT1 A 0 A_CustomMissile("QGuardianLaser",32,0,7)
			QGU3 STUVW 3 A_FaceTarget
			Goto See2
		Melee2:
			QGU3 XYZ 3 A_FaceTarget
			QGU4 ABCDEFG 3 A_FaceTarget
			TNT1 A 0 A_CustomMissile("QGuardianLaser",32,0,-7)
			TNT1 A 0 A_CustomMissile("QGuardianLaser",32,0,0)
			TNT1 A 0 A_CustomMissile("QGuardianLaser",32,0,7)
			QGU4 HIJKLM 3 A_FaceTarget
			Goto See2
		Melee3:
			QGU4 NOPQ 3 A_FaceTarget
			QGU4 R 3 A_CustomMeleeAttack(random(10,20))
			QGU4 STUVWXY 3 A_FaceTarget
			Goto See2
		Missile:
			QGU3 DEFG 3 A_FaceTarget
			TNT1 A 0 A_CustomMissile("QGuardianLaser",32,0,-7)
			TNT1 A 0 A_CustomMissile("QGuardianLaser",32,0,0)
			TNT1 A 0 A_CustomMissile("QGuardianLaser",32,0,7)
			QGU3 HIJKL 3 A_FaceTarget
			Goto See2
		Pain:
			TNT1 A 0 A_Jump(128,"PainB")
			QGU4 Z 3 A_Pain
			QGU5 ABCDEFGHI 3
			Goto See2
		PainB:
			TNT1 A 0 A_Pain
			QGU5 JKLMNOP 3
			Goto See2
		Death:
			TNT1 A 0 A_GiveToTarget("KillCount",1)
			TNT1 A 0 A_Scream
			TNT1 A 0 A_NoBlocking
			QGU5 QRSTUVWXYZ 3
			QGU6 ABCDEFGHIJK 3
			TNT1 A 0 A_KillMaster
			TNT1 A -1
			Stop
		Death.ZorchPistol:
		Death.Zorch:
		Death.ZorchKamikaze:
		Death.PhasingZorch:
		Death.ZorchSpectral:
			TNT1 A 0 A_GiveToTarget("KillCount",1)
			QGU5 M 0 A_Stop
			TNT1 A 0 A_ChangeFlag("DONTGIB",1)
			TNT1 A 0 A_PlaySoundEx("chex/zorchhuge","soundslot5",0,0)
			QGU5 M 8 A_SpawnItem("ZorchEffectHuge")
			TNT1 K 0 A_GiveInventory("EnemyZorched",1)
			QGU5 M 8 A_SetTranslucent(0.9,0)
			QGU5 M 0 A_Scream
			QGU5 M 8 A_SetTranslucent(0.8,0)
			QGU5 M 0 A_NoBlocking
			QGU5 M 8 A_SetTranslucent(0.7,0)
			QGU5 M 8 A_SetTranslucent(0.6,0)
			QGU5 M 8 A_SetTranslucent(0.5,0)
			QGU5 M 8 A_SetTranslucent(0.4,0)
			QGU5 M 8 A_SetTranslucent(0.3,0)
			QGU5 M 8 A_SetTranslucent(0.2,0)
			QGU5 M 8 A_SetTranslucent(0.1,0)
			TNT1 A 1 A_SetTranslucent(1,0)
			TNT1 A 30
			TNT1 A -1 A_KillMaster
			stop
	}
}

ACTOR ATGuardian
{
	Scale 0.5
	States
	{
		Spawn:
			QGU1 ABCDEFGHIJKLMNOPQRSTUVWXYZ 4
			QGU2 ABCDE 4
			TNT1 A 10
			QGU2 FGHIJKLMNOPQR 4
			TNT1 A 10
			QGU2 STUVWXYZ 4
			QGU3 ABC 4
			TNT1 A 10
			QGU3 DEFGHIJKL 4
			TNT1 A 10
			QGU3 MNOPQRSTUVW 4
			TNT1 A 10
			QGU3 XYZ 4
			QGU4 ABCDEFGHIJKLM 4
			TNT1 A 10
			QGU4 NOPQRSTUVWXY 4
			TNT1 A 10
			QGU4 Z 4
			QGU5 ABCDEFGHI 4
			TNT1 A 10
			QGU5 JKLMNOP 4
			TNT1 A 10
			QGU5 QRSTUVWXYZ 3
			QGU6 ABCDEFGHIJK 3
			TNT1 A 10
			Loop
	}
}